unit: archetype/bard
in: archetype
group: "_{Core Rulebook}"
name: "_{Bard}"

inc:
  - set: occultism-proficiency
    value: trained
  - set: performance-proficiency
    value: trained

  - at: '@pages'
    add:
      - page: archetype-class-bard
        name: "Bard (Archetype)"
        order: 26
        flex: true
        landscape: true
        contents:
          - layout: 2e
            contents:
              - layout: 2e
                contents:
                  - g:
                    contents:
                      - h2: "_{Bard}"

                      - section: "_{Muse}"
                        primary: true
                        contents:
                          - field: bard-muse-name
                            label: "_{Name}"
                            width: stretch
                          - field: bard-muse-type
                            label: "_{Type}"
                            width: stretch

                      - section: "_{Counter Perform}"
                        contents:
                          - selectable: 'bard-counter-perform'
                            contents:
                              - p: "_{When you or an ally within 60ft rolls a saving throw against an auditory or visual effect,}"
                              - action: reaction
                                contents:
                                  - p: "_{Roll a Performance check and you or your ally can take the better result.}"
                              
                      - section: "_{Inspire Courage}"
                        contents:
                          - selectable: 'bard-counter-perform'
                            contents:
                              - action:
                                contents:
                                  - field: inspire-courage-bonus
                                    legend: "_{Courage Bonus}"
                                    value: "+1"
                                    border: full
                                    width: large
                                  - p: "_{Bonus to attack and damage rolls, and saves against fear.}"

                      - section: "_{Bard Feats}"
                        contents:
                          - list:
                            hr: true
                            zebra: true
                            contents:
                              - repeat: 5
                                contents:
                                  - article: "bard-feat-#{i}"
                                    lines: 2
                      - tail:
                      - spacer:
                  - g:
                    contents:
                      - section: "_{Spellcasting}"
                        contents:
                          - list:
                            hr: true
                            contents:
                              - g:
                                contents:
                                  - calc:
                                    output:
                                      field:
                                      legend: "_{Occult Spell\nAttack Roll}"
                                      icon: bonus
                                    inputs:
                                      - field:
                                        ref: CHA
                                        label: "_{CHA}"
                                        underlay: "_{CHA}"
                                      - field:
                                        label: "_{Proficiency}"
                                        control: proficiency
                                        value: trained
                                      - field:
                                        label: "_{Misc}"
                                        misc: true
                                  - calc:
                                    output:
                                      field:
                                      legend: "_{Occult Spell\nSave DC}"
                                      icon: dc
                                    inputs:
                                      - span: "10 +"
                                      - field:
                                        ref: CHA
                                        label: "_{CHA}"
                                        underlay: "_{CHA}"
                                      - field:
                                        label: "_{Proficiency}"
                                        control: proficiency
                                        value: trained
                                      - field:
                                        label: "_{Misc}"
                                        misc: true


                              - level: 0
                                marker: ''
                                contents:
                                  - field:
                                    width: stretch
                                    frame: none
                                    repeat: 3
                                    merge-bottom: true
                              - g:
                                contents:
                                  - selectable: ''
                                    contents:
                                      - list:
                                        hr: true
                                        contents:
                                          - level: 1
                                            marker: ''
                                            contents:
                                              - field:
                                                width: stretch
                                                repeat: 2
                                                frame: none
                                                merge-bottom: true
                                          - level: 2
                                            marker: ''
                                            contents:
                                              - field:
                                                width: stretch
                                                repeat: 2
                                                frame: none
                                                merge-bottom: true
                                          - level: 3
                                            marker: ''
                                            contents:
                                              - field:
                                                width: stretch
                                                repeat: 2
                                                frame: none
                                                merge-bottom: true
                              - g:
                                contents:
                                  - selectable: ''
                                    contents:
                                      - list:
                                        hr: true
                                        contents:
                                          - level: 4
                                            marker: ''
                                            contents:
                                              - field:
                                                width: stretch
                                                repeat: 2
                                                frame: none
                                                merge-bottom: true
                                          - level: 5
                                            marker: ''
                                            contents:
                                              - field:
                                                width: stretch
                                                repeat: 2
                                                frame: none
                                                merge-bottom: true
                                          - level: 6
                                            marker: ''
                                            contents:
                                              - field:
                                                width: stretch
                                                repeat: 2
                                                frame: none
                                                merge-bottom: true
                              - g:
                                contents:
                                  - selectable: ''
                                    contents:
                                      - list:
                                        hr: true
                                        contents:
                                          - level: 7
                                            marker: ''
                                            contents:
                                              - field:
                                                width: stretch
                                                frame: none
                                                merge-bottom: true
                                          - level: 8
                                            marker: ''
                                            contents:
                                              - field:
                                                width: stretch
                                                frame: none
                                                merge-bottom: true

                      - section: "_{Occult Breadth}"
                        contents:
                          - selectable: ''
                            contents:
                              - p: "_{Gain an extra spell slot at each spell level except your highest two.}"
                              - p: "_{Learn an extra spell at each spell level except your highest two.}"

                      - tail:
                      - spacer:
