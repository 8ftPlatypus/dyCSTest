unit: class/wizard
in: class
group: "_{Core Rulebook}"
name: "_{Wizard}"

form:
  - option: wizard-school
    name: "_{Arcane School}"
    max: 1
  - option: wizard-thesis
    name: "_{Arcane Thesis}"
    max: 1
  - option: feat-wizard
    name: "_{Wizard Feats}"
    max: 8
    levels: 

require:
  - unit: weapon-spec/slow
  - unit: option/spellbook

inc:
  - set: class
    value: "_{Wizard}"
  - set: hp-class
    value: 6

  - set: perception-proficiency
    value: trained

  - set: fortitude-proficiency
    value: trained
  - set: reflex-proficiency
    value: trained
  - set: will-proficiency
    value: expert

  - set: arcana-proficiency
    value: trained

  - at: '@key-ability-field'
    replace:
      - field: key-ability
        label: "_{INT}"
        underlay: "_{INT}"
        ref: INT

  - at: '@pages'
    add:
      - page: wizard
        name: "_{Wizard}"
        order: 10
        contents:
          - layout: 2l
            contents:
              - g:
                contents:
                  - class-icon: wizard
                  - h2: "_{Wizard}"
                  - section: "_{Thesis}"
                    primary: true
                    contents:
                      - field: thesis
                        size: large
                        width: stretch
                        align: left
                        label: "_{Title}"
                        repeat: 3
                        merge-bottom: true
                      - hr:
                      - field: thesis-details
                        width: stretch
                        align: left
                        label: "_{Abstract}"
                        repeat: 8
                        merge-bottom: true

                  - section: "_{Specialisation}"
                    contents:
                      - field: wizard-school
                        label: "_{School}"
                        width: stretch
                        align: left
                      - h5: "_{School Power}"
                      - slots:
                        min: 1
                        max: 1
                        placeholder:
                          article:
                          header:
                            - field: wizard-feat-level-#{level}
                              width: stretch
                              frame: none
                              align: left
                          contents:
                            - field: wizard-feat-level-#{level}-details
                              width: stretch
                              align: left
                              frame: none
                              repeat: 2
                        contents:
                          - zone: '@wizard-school-power'

                  - section: "_{Spellcasting}"
                    contents:
                      - spells-table:
                        flip: true
                        merge-bottom: false

                      - paste: spell-attack
                        params:
                          id: arcane-spell-attack
                          legend: "_{Arcane\nSpell Attack}"

                      - paste: spell-dc
                        params:
                          id: arcane-spell-dc
                          legend: "_{Arcane\nSpell DC}"

                  - section: "_{Arcane Focus}"
                    contents:
                      - field: wizard-arcane-focus-item
                        label: "_{Focus Item}"
                        width: stretch
                        align: left
                      - action: free
                        contents:
                          - article:
                            title: "_{Drain Arcane Focus}"
                            contents:
                              - p: "_{Expend the power stored in your arcane focus to cast one spell you prepared and cast today, without spending a spell slot.}"

                  - tail:

              - g:
                contents:
                  - section: "_{Cantrips}"
                    contents:
                      - spells-list:
                        min: 0
                        max: 0
                        spells: 5

                  - section: "_{Spells}"
                    contents:
                      - spells-list:
                        min: 1
                        max: 9
                        spells: 4

                  - paste: class-feats
                    params:
                      id: wizard-feats
                      title: "_{Wizard Feats}"
                      
                  - tail:


