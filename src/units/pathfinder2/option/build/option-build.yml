unit: option/build
name: "_{Build A Character}"
inc:
  - at: '@pages'
    add:
      - page: build
        name: "_{Build A Character}"
        no-bg: true
        order: 2
        flex: true
        numbered: false
        contents:
          - layout: 2l
            contents:
              - g:
                contents:
                  - h2: "_{Build A Character}"
              - g:
                contents:
                  - layout: alignment
                    contents:
                      - field: build-concept
                        legend: "_{Character concept}"
                        width: stretch
                        repeat: 2
                      - field: build-alignment
                        frame: none
                        control: alignment

              - g:
                valign: top
                contents:
                  - h4: "_{Step One}"
                  - p: "_{Pick your race and where your character comes from.}"
              - section: "_{Ancestry}"
                contents:
                  - g:
                    valign: top
                    contents:
                      - layout: 2e
                        contents:
                          - row:
                            contents:
                              - field: build-ancestry
                                width: stretch
                                align: left
                                label: "_{Ancestry}"
                          - row:
                            contents:
                              - field: build-ancestry-hp
                                label: "_{Hit Points}"
                                icon: hp
                                overlay: "_{hp}"
                              - field: build-ancestry-size
                                label: "_{Size}"
                                icon: size
                              - field: build-ancestry-speed
                                label: "_{Speed}"
                                control: speed
                                width: large
                          - row:
                            contents:
                              - field: build-ancestry-heritage
                                width: stretch
                                align: left
                                label: "_{Heritage}"
                          - level: 1
                            contents:
                              - field: build-ancestry-feat
                                width: stretch
                                align: left
                                label: "_{Ancestry feat}"
              - g:
                valign: top
                contents:
                  - h4: "_{Step Two}"
                  - p: "_{Decide how your character grew up.}"
              - section: "_{Background}"
                contents:
                  - layout: 2e
                    contents:
                      - field: build-background
                        label: "_{Background}"
                        width: stretch
                        align: left
                      - row:
                        contents:
                          - icon: proficiency-trained
                          - field: build-background-skill
                            label: "_{Skill bonus}"
                            align: left
                      - g:
                      - level: 1
                        contents:
                          - field: build-background-skill-feat
                            label: "_{Skill feat}"
                            width: stretch
                            align: left

              - g:
                valign: top
                contents:
                  - h4: "_{Step Three}"
                  - p: "_{Pick from one of the available classes.}"
                  - p: "_{You may need to pick a specialisation, such as a Sorcerer's bloodline or Cleric's domain.}"
                  - spacer:
              - section: "_{Class}"
                contents:
                  - layout: 2e
                    contents:
                      - row:
                        contents:
                          - field: build-class
                            label: "_{Class}"
                            width: stretch
                            align: left
                      - row:
                        contents:
                          # - field: build-class-level
                          #   label: "Level"
                          #   output: true
                          #   underlay: 1
                          - field: build-class-hp
                            label: "_{Hit Points}"
                            icon: hp
                            overlay: "_{hp}"
                          - field: build-class-key-ability
                            label: "_{Key Ability}"
                            width: stretch
                          # - spacer:
                      - field: build-class-specialisation
                        label: "_{Subclass}"
                        width: stretch
                        align: left
                      - row:
                        contents:
                          - proficiency:
                            content: "_{Perception}"
                  - h5: "_{Saving Throws}"
                  - list:
                    columns: 3
                    contents:
                      - proficiency:
                        content: "_{Fortitude}"
                      - proficiency:
                        content: "_{Reflex}"
                      - proficiency:
                        content: "_{Will}"
                  - h5: "_{Skills}"
                  - list:
                    columns: 3
                    contents:
                      - row:
                        valign: middle
                        contents:
                          - icon: proficiency
                          - field: proficiency-skill-1
                            frame: none
                            width: stretch
                      - row:
                        valign: middle
                        contents:
                          - icon: proficiency
                          - field: proficiency-skill-1
                            frame: none
                            width: stretch
                      - row:
                        valign: middle
                        contents:
                          - icon: proficiency
                          - field: proficiency-skill-1
                            frame: none
                            width: stretch

              - g:
                valign: top
                contents:
                  - h4: "_{Step Four}"
                  - p: "_{Add up the ability score bonuses you get:}"
                  - ul:
                    contents:
                      - li: "_{Several +2 or -2 from your ancestry.}"
                      - li: "_{Optionally, take a -2 flaw in two abilities to gain a +2 boost in one other. This may not take your ancestry bonus above +2 or below -2.}"
                      - li: "_{One +2 from your background.}"
                      - li: "_{Several +2 from your class.}"
                      - li: "_{Free +2 to any four abilities.}"
              - section: "_{Details}"
                contents:
                  - table:
                    field_frame: none
                    collapse: true
                    zebra: true
                    columns:
                      - ""
                      - ""
                      - "_{Ancestry}\n-2 / +2"
                      - "_{Background}\n+2"
                      - "_{Class}\n+2"
                      - "_{Free}\n+2"
                      - ""
                      - "_{Ability\nScore}"
                      - "_{Ability\nModifier}"
                      - "_{Key\nAbility}"
                    rows:
                      - ability: "_{Strength}"
                        short: "_{STR}"
                        code: STR
                      - ability: "_{Dexterity}"
                        short: "_{DEX}"
                        code: DEX
                      - ability: "_{Constitution}"
                        short: "_{CON}"
                        code: CON
                      - ability: "_{Intelligence}"
                        short: "_{INT}"
                        code: INT
                      - ability: "_{Wisdom}"
                        short: "_{WIS}"
                        code: WIS
                      - ability: "_{Charisma}"
                        short: "_{CHA}"
                        code: CHA
                    template:
                      - h6: "#{ability}"
                      - span: 10 +
                      - field: build-boost-#{code}-ancestry
                        control: boost
                      - field: build-boost-#{code}-background
                        control: boost
                        down: false
                      - field: build-boost-#{code}-class
                        control: boost
                        down: false
                      - field: build-boost-#{code}-free
                        control: boost
                        down: false
                      - span: "&rArr;"
                      - field: build-#{code}-score
                      - field: build-#{code}-modifier
                        icon: dc
                        border: full
                        underlay: "#{short}"
                      - field: build__key-ability
                        control: radio
                        value: "#{code}"
                  - row:
                    contents:
                      - level: 1
                        contents:
                          - field: max-ability-score
                            frame: right
                            border: full
                            label: "_{Max ability score}"
                            value: 18
                      - calc:
                        inline: true
                        output:
                          label: "_{Ability\nModifier}"
                        inputs:
                          - span: "("
                          - label: "_{Ability\nScore}"
                          - span: "- 10 ) &divide; 2"
              - g:
                valign: top
                contents:
                  - p: "_{Calculate your hit points. Some of these come from your ancestry, and some each level from your class and constitution modifier.}"
              - g:
                valign: top
                contents:
                  - hr:
                  - calc:
                    output:
                      field: build-hp
                      legend: "_{Hit Points}"
                      icon: hp
                      overlay: "_{hp}"
                      width: large
                    inputs:
                      - field:
                        ref: build-ancestry-hp
                        label: "_{Ancestry}"
                      - span: "+ ("
                      - field:
                        ref: build-class-hp
                        label: "_{Class}"
                      - span: "+"
                      - field:
                        ref: CON
                        underlay: "_{CON}"
                      - span: ") &times;"
                      - field:
                        ref: level
                        label: "_{Level}"
                        underlay: "1"
                      - span: "+"
                      - field:
                        label: "_{Misc}"
                        misc: true
              - g:
                valign: top
                contents:
                  - p: "_{Your proficiencies at level 1 are: 0, 3, 5, 7 and 9. They increase as you level up.}"
              - g:
                valign: top
                contents:
                  - hr:
                  - row:
                    valign: top
                    contents:
                      - g:
                        valign: top
                        contents:
                          - field: proficiency-untrained
                            label: "_{Untrained}"
                            output: true
                            control: proficiency
                            value: 0
                          - label: "_{None}"
                            align: center
                      - g:
                        valign: top
                        contents:
                          - field: proficiency-trained
                            label: "_{Trained}"
                            output: true
                            control: proficiency
                            value: trained
                          - label: "_{Level}\n+2"
                            align: center
                      - g:
                        valign: top
                        contents:
                          - field: proficiency-expert
                            label: "_{Expert}"
                            output: true
                            control: proficiency
                            value: expert
                          - label: "_{Level}\n+4"
                            align: center
                      - g:
                        valign: top
                        contents:
                          - field: proficiency-master
                            label: "_{Master}"
                            output: true
                            control: proficiency
                            value: master
                          - label: "_{Level}\n+6"
                            align: center
                      - g:
                        valign: top
                        contents:
                          - field: proficiency-legendary
                            label: "_{Legendary}"
                            output: true
                            control: proficiency
                            value: legendary
                          - label: "_{Level}\n+8"
                            align: center
                      - spacer:
              - g:
                valign: top
                contents:
                  - h4: "_{Step Five}"
                  - p: "_{Work out what your character owns at the start of the game, including clothes and weapons.}"
                  - row:
                    layout: split
                    contents:
                      - field: build-starting-money
                        legend: "_{Starting\nMoney}"
                        overlay: "_{sp}"
                        value: '150'
                        border: full
                        control: money
                        denomination: silver
                        digits: 4
                        editable: false
                      - spacer:
                      - field: build-remaining-money
                        label: "_{Remaining\nMoney}"
                        control: money
                        denomination: silver
                        digits: 4
                  - spacer:
              - section: "_{Equipment}"
                contents:
                  - table:
                    collapse: true
                    field_frame: none
                    rows:
                      - id: kit
                        name: "_{Kit}"
                      - id: weapons
                        name: "_{Weapons}"
                      - id: armour
                        name: "_{Armour}"
                      - id: gear
                        name: "_{Gear}"
                    template:
                      - h6: "#{name}"
                      - row:
                        contents:
                          - field: "equipment-#{id}"
                            width: stretch
                          - field: "cost-#{id}"
                            control: money
                            denomination: silver
                            digits: 4
                  - tail:
